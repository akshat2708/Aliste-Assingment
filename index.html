<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Electrician Allocation System</title>
</head>
<body>
  <h1>Electrician Allocation System</h1>
  <button onclick="autoAssign()">Auto Assign Electricians</button>

  <script>
    const electricians = [
    {name:"Digvijay",phone:"6161232524",zone:[],"griveianceElectrician":true},{name:"Pranav",phone:"6161232524",zone:[],"griveianceElectrician":true},{name:"Sidharth",phone:"6161232524",zone:["NOIDA","GHAZIABAD"],"griveianceElectrician":false},{name:"Javed",phone:"6161232524",zone:["GURGAON"],"griveianceElectrician":false}
    ];

    const sites = [
{ name: "Manthan ", phone: "6163988877", city: "GREATER NOIDA", AssignedElectrician: [], InstallationDate: "2023-10-06T00:00:00.000Z", grievance: false }, { name: "Samrat Jain ", phone: "6163988877", city: "GHAZIABAD", AssignedElectrician: [], InstallationDate: "2023-03-07T00:00:00.000Z", grievance: false }, { name: "Abhimanu Jaiswal ", phone: "6163988877", city: "DELHI", AssignedElectrician: [], InstallationDate: "2023-10-14T00:00:00.000Z", grievance: true }, { name: "Abhinav Tambi (3rd Floor) ", phone: "6163988877", city: "DELHI", AssignedElectrician: [], InstallationDate: "2023-12-15T00:00:00.000Z", grievance: false }, { name: "Abhinav Tambi (2nd Floor) ", phone: "6163988877", city: "DELHI", AssignedElectrician: [], InstallationDate: "2023-12-15T00:00:00.000Z", grievance: false }, { name: "Avi Arora", phone: "6163988877", city: "NOIDA", AssignedElectrician: [], InstallationDate: "2023-03-01T00:00:00.000Z", grievance: true }, { name: "Mukul Rathi", phone: "6163988877", city: "GURGAON", AssignedElectrician: [], InstallationDate: "2023-08-04T00:00:00.000Z", grievance: false }, { name: "Pankaj Khatri", phone: "6163988877", city: "DELHI", AssignedElectrician: [], InstallationDate: "2023-10-18T00:00:00.000Z", grievance: false }, { name: "Abhinav Tambi (4RTH Floor) ", phone: "6163988877", city: "DELHI", AssignedElectrician: [], InstallationDate: "2023-12-15T00:00:00.000Z", grievance: true }, { name: "Mohit Garg ", phone: "6163988877", city: "DELHI", AssignedElectrician: [], InstallationDate: "2023-12-08T00:00:00.000Z", grievance: false }, { name: "PRATEEK  ", phone: "6163988877", city: "NOIDA", AssignedElectrician: [], InstallationDate: "2023-03-02T00:00:00.000Z", grievance: false }, { name: "Ishaan ", phone: "6163988877", city: "GURGAON", AssignedElectrician: [], InstallationDate: "2023-09-15T00:00:00.000Z", grievance: true }, { name: "Official Ronnie Hunk ", phone: "6163988877", city: "GHAZIABAD", AssignedElectrician: [], InstallationDate: "2023-11-15T00:00:00.000Z", grievance: false }, { name: "AARYA MOTORS ", phone: "6163988877", city: "GURGAON", AssignedElectrician: [], InstallationDate: "2023-08-17T00:00:00.000Z", grievance: false }, { name: "Utkarsh ", phone: "6163988877", city: "DELHI", AssignedElectrician: [], InstallationDate: "2023-03-07T00:00:00.000Z", grievance: true }, { name: "Vijesh Wadhwa ", phone: "6163988877", city: "GURGAON", AssignedElectrician: [], InstallationDate: "2023-10-22T00:00:00.000Z", grievance: false }, { name: "Shahzama ", phone: "6163988877", city: "GURGAON", AssignedElectrician: [], InstallationDate: "2023-12-19T00:00:00.000Z", grievance: false }, { name: "aartstore  ", phone: "6163988877", city: "ANY FOR NOW", AssignedElectrician: [], InstallationDate: "2023-03-05T00:00:00.000Z", grievance: true }, { name: "Sameer ", phone: "6163988877", city: "DELHI", AssignedElectrician: [], InstallationDate: "2023-10-20T00:00:00.000Z", grievance: false }, { name: "Anuj Pandey ", phone: "6163988877", city: "GURGAON", AssignedElectrician: [], InstallationDate: "2023-03-17T00:00:00.000Z", grievance: false }, { name: "Randeep Reehal ", phone: "6163988877", city: "DELHI", AssignedElectrician: [], InstallationDate: "2023-03-15T00:00:00.000Z", grievance: true }, { name: "Harsh Bansal ", phone: "6163988877", city: "GURGAON", AssignedElectrician: [], InstallationDate: "2023-03-03T00:00:00.000Z", grievance: false }, { name: "neha05singh  ", phone: "6163988877", city: "ANY FOR NOW", AssignedElectrician: [], InstallationDate: "2023-03-02T00:00:00.000Z", grievance: false }, { name: "pujapunj9  ", phone: "6163988877", city: "ANY FOR NOW", AssignedElectrician: [], InstallationDate: "2023-03-18T00:00:00.000Z", grievance: true }, { name: "  Divanshu Arora ", phone: "6163988877", city: "ANY FOR NOW", AssignedElectrician: [], InstallationDate: "2023-02-28T15:00:23.292Z", grievance: false }, { name: "Sushil Flock Coliving", phone: "6163988877", city: "GURGAON", AssignedElectrician: [], InstallationDate: "2023-03-03T02:36:48.624Z", grievance: false }, { name: "Yogesh Agarwal ", phone: "6163988877", city: "NOIDA", AssignedElectrician: [], InstallationDate: "2023-07-24T00:00:00.000Z", grievance: true }, { name: "MLKR Pvt. Ltd (ref 2) ", phone: "6163988877", city: "DELHI", AssignedElectrician: [], InstallationDate: "2023-09-10T00:00:00.000Z", grievance: false }, { name: "KRISHNA ROY", phone: "6163988877", city: "DELHI", AssignedElectrician: [], InstallationDate: "2023-01-04T00:00:00.000Z", grievance: false }, { name: "Anuj Gupta  ", phone: "6163988877", city: "NOIDA", AssignedElectrician: [], InstallationDate: "2023-10-18T00:00:00.000Z", grievance: true }
   
    ];


    function autoAssign() {
      const currentDate = new Date().toISOString().split('T')[0]; // Get current date

    
      const availableElectricians = electricians.filter(electrician =>
        electrician.grievanceElectrician || electrician.zone.includes(sites[0].city)
      );

      sites.forEach(site => {
        if (site.installationDate === currentDate) {
          const suitableElectrician = availableElectricians.shift();
          if (suitableElectrician) {
            site.assignedElectrician.push({
              electricianName: suitableElectrician.name,
              electricianAssignDate: currentDate
            });
          }
        }
      });

     
      console.log(sites);
      console.log(electricians.name);
    }
  </script>
</body>
</html>
